<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Disha Computer Institute | Student Projects</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
 --bg:#000;
 --card:#111;
 --text:#fff;
 --muted:#aaa;
 --red:#e10600;
}
.light{
 --bg:#f4f4f4;
 --card:#fff;
 --text:#111;
 --muted:#555;
}
*{box-sizing:border-box}
body{
 margin:0;
 background:var(--bg);
 color:var(--text);
 font-family:Poppins;
 transition:.4s;
}

/* HEADER */
header{
 display:flex;
 justify-content:space-between;
 align-items:center;
 padding:15px 25px;
 animation:slideDown .5s ease;
}
.header-right{display:flex;gap:12px}
.icon{
 cursor:pointer;
 padding:8px 12px;
 border-radius:50%;
 background:var(--card);
 transition:.3s;
}
.icon:hover{background:var(--red);color:#fff}

/* CONTROLS */
.controls{
 display:flex;
 justify-content:center;
 gap:10px;
 padding:15px;
 flex-wrap:wrap;
 animation:fadeIn .6s ease;
}
.controls input,.controls select{
 padding:10px 12px;
 border-radius:10px;
 border:none;
 min-width:180px;
}

/* COUNT */
.count{text-align:center;font-size:14px;color:var(--muted)}

/* PROJECT GRID */
.projects{
 max-width:1200px;
 margin:auto;
 padding:20px;
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
 gap:25px;
 animation:fadeInUp .7s ease;
}
.card{
 background:var(--card);
 padding:22px;
 border-radius:22px;
 transition:.4s;
}
.card:hover{
 transform:translateY(-10px);
 box-shadow:0 0 30px rgba(225,6,0,.3);
}
.card h3{color:var(--red);margin:0}
.meta{color:var(--muted);margin:6px 0}

/* BUTTONS */
.btn{
 display:inline-block;
 margin-top:10px;
 padding:8px 14px;
 background:var(--red);
 color:#fff;
 border-radius:20px;
 text-decoration:none;
 font-size:14px;
 transition:.3s;
 cursor:pointer;
}
.btn:hover{transform:scale(1.05)}
.btn.secondary{background:#555}

/* MODALS */
.modal{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.7);
 display:none;
 justify-content:center;
 align-items:center;
}
.modal-content{
 background:var(--card);
 padding:25px;
 border-radius:20px;
 width:90%;
 max-width:400px;
 animation:scaleIn .3s ease;
}
.modal-content input,select,button{
 width:100%;
 padding:10px;
 margin:6px 0;
 border-radius:8px;
 border:none;
}
button{background:var(--red);color:#fff;font-weight:600}

/* ANIMATIONS */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1}}
@keyframes slideDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1}}
@keyframes scaleIn{from{opacity:0;transform:scale(.9)}to{opacity:1}}
</style>
</head>

<body>

<header>
 <h3>Disha Student Projects</h3>
 <div class="header-right">
  <div class="icon" onclick="toggleTheme()">üåó</div>
  <div class="icon" onclick="openLogin()">üë§</div>
 </div>
</header>

<!-- SEARCH / FILTER / SORT -->
<div class="controls">
 <input id="search" placeholder="üîç Search student or project">
 <select id="courseFilter">
  <option value="all">All Courses</option>
 </select>
 <select id="sort">
  <option value="latest">Latest</option>
  <option value="az">A‚ÄìZ</option>
 </select>
</div>

<div class="count" id="count"></div>

<div class="projects" id="projectList"></div>

<!-- LOGIN -->
<div class="modal" id="loginModal">
 <div class="modal-content">
  <h3>Admin Login</h3>
  <input type="password" id="adminPass" placeholder="Password">
  <button onclick="login()">Login</button>
 </div>
</div>

<!-- DASHBOARD -->
<div class="modal" id="dashboardModal">
 <div class="modal-content">
  <h3>Admin Dashboard</h3>
  <button onclick="openAdd()">‚ûï Add Project</button>
  <button onclick="showManage()">‚úèÔ∏è Edit / Delete Projects</button>
  <button onclick="logout()" style="background:#444">üö™ Logout</button>
 </div>
</div>

<!-- ADD / EDIT -->
<div class="modal" id="adminModal">
 <div class="modal-content">
  <h3 id="formTitle">Add Project</h3>

  <input id="student" placeholder="Student Name">
  <select id="course" onchange="loadSubtypes()"></select>
  <select id="subtype"></select>
  <input id="project" placeholder="Project Title">
  <input id="projectLink" placeholder="Live Project URL">

  <button onclick="saveProject()">Save</button>
 </div>
</div>

<script>
/* THEME */
function toggleTheme(){
 document.body.classList.toggle("light");
 localStorage.setItem("theme",
  document.body.classList.contains("light")?"light":"dark");
}
if(localStorage.getItem("theme")==="light"){
 document.body.classList.add("light");
}

/* CONFIG */
const API_URL="https://script.google.com/macros/s/AKfycbwYHntIvgXgRFT9DDSm9e75Ny3dZ7GgMJDirzjYmFaGmtAjIMFx8B7_lefEPBSpGsTG/exec";
const ADMIN_PASSWORD="disha@123";

const COURSES={
 "Tally Prime":["Accounting","GST","Payroll"],
 "Excel Master":["Basic","Advanced","Dashboard"],
 "Graphic Design":["Photoshop","CorelDraw","Illustrator","Canva"],
 "Web Development":["HTML","CSS","JavaScript","All Combined"],
 "Programming":["Java","Python","JavaScript","PHP","C","C++","C#"],
 "AutoCAD":["Civil","Mechanical","Electrical"],
 "Google SketchUp":["Interior","Exterior"],
 "Full Stack":["MERN","MEAN","Java Full Stack"],
 "Data Analyst":["Excel","Power BI","SQL","Python"],
 "MS Office":["Word","Excel","PowerPoint","Outlook"],
 "Digital Marketing":["SEO","Social Media","Google Ads"],
 "Video Editing":["Premiere Pro","After Effects","CapCut"]
};

let projects=[], editId=null, isAdmin=false;

/* LOAD DROPDOWNS */
for(let c in COURSES){
 course.innerHTML+=`<option>${c}</option>`;
 courseFilter.innerHTML+=`<option>${c}</option>`;
}
loadSubtypes();

/* FETCH */
function loadProjects(){
 fetch(API_URL).then(r=>r.json()).then(d=>{
  projects=d;
  render();
 });
}
loadProjects();

/* RENDER */
function render(){
 projectList.innerHTML="";
 let q=search.value.toLowerCase();
 let cf=courseFilter.value;
 let list=[...projects];

 if(sort.value==="az"){
  list.sort((a,b)=>a.project.localeCompare(b.project));
 }else{
  list.sort((a,b)=>b.id-a.id);
 }

 let filtered=list.filter(p=>
  (p.student.toLowerCase().includes(q) ||
   p.project.toLowerCase().includes(q)) &&
  (cf==="all" || p.course===cf)
 );

 count.innerText=`Showing ${filtered.length} project(s)`;

 filtered.forEach(p=>{
  projectList.innerHTML+=`
   <div class="card">
    <h3>${p.project}</h3>
    <div class="meta">${p.student}</div>
    <div class="meta">${p.course} ‚Ä¢ ${p.subtype}</div>

    <a class="btn" href="${p.projectLink}" target="_blank">View Project</a>

    ${isAdmin?`
     <div>
      <a class="btn secondary" onclick="editProject(${p.id})">Edit</a>
      <a class="btn secondary" onclick="deleteProject(${p.id})">Delete</a>
     </div>`:""}
   </div>`;
 });
}
search.oninput=courseFilter.onchange=sort.onchange=render;

/* LOGIN */
function openLogin(){loginModal.style.display="flex"}
function login(){
 if(adminPass.value===ADMIN_PASSWORD){
  isAdmin=true;
  loginModal.style.display="none";
  dashboardModal.style.display="flex";
  render();
 }else alert("Wrong password");
}

/* DASHBOARD */
function openAdd(){
 editId=null;
 formTitle.innerText="Add Project";
 student.value=project.value=projectLink.value="";
 dashboardModal.style.display="none";
 adminModal.style.display="flex";
}
function showManage(){
 dashboardModal.style.display="none";
 render();
}
function logout(){
 isAdmin=false;
 dashboardModal.style.display="none";
 render();
}

/* SUBTYPES */
function loadSubtypes(){
 subtype.innerHTML="";
 COURSES[course.value]?.forEach(s=>{
  subtype.innerHTML+=`<option>${s}</option>`;
 });
}

/* SAVE */
function saveProject(){
 fetch(API_URL,{
  method:"POST",
  body:JSON.stringify({
   action:editId?"update":"create",
   id:editId,
   student:student.value,
   course:course.value,
   subtype:subtype.value,
   project:project.value,
   projectLink:projectLink.value
  })
 }).then(()=>{adminModal.style.display="none";loadProjects()});
}

/* EDIT */
function editProject(id){
 const p=projects.find(x=>x.id==id);
 editId=id;
 student.value=p.student;
 course.value=p.course;
 loadSubtypes();
 subtype.value=p.subtype;
 project.value=p.project;
 projectLink.value=p.projectLink;
 formTitle.innerText="Edit Project";
 adminModal.style.display="flex";
}

/* DELETE */
function deleteProject(id){
 if(!confirm("Delete this project?")) return;
 fetch(API_URL,{method:"POST",body:JSON.stringify({action:"delete",id})})
 .then(loadProjects);
}
</script>

</body>
</html>
